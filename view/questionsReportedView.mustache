<section class="py-5 min-vh-100" style="background: url('../../QuizGame/public/img/background.png'); background-size: cover; background-position: center;">
    <div class="container my-4">
        <div class="card shadow-lg rounded-4">
            <div class="card-header bg-dark text-white text-center rounded-top-4 p-3">
                <h3 class="mb-0 fs-4">Panel de Preguntas Reportadas</h3>
            </div>
            <div class="card-body bg-white rounded-bottom-4 p-3 p-md-4">
                {{#alerta}}
                <div class="alert alert-success alert-dismissible fade show text-center" role="alert">
                    {{alerta}}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
                </div>
                {{/alerta}}

                <div class="d-block d-lg-none text-center small text-secondary mb-2"><i class="fas fa-arrows-alt-h me-2"></i> Deslizá la tabla para ver más</div>
                <div class="table-responsive">
                    <table class="table table-hover align-middle">
                        <thead class="table-light">
                            <tr>
                                <th style="min-width: 80px;">ID</th>
                                <th style="min-width: 250px;">Pregunta</th>
                                <th style="min-width: 250px;">Motivo</th>
                                <th style="min-width: 150px;">Reportado por</th>
                                <th style="min-width: 120px;">Fecha</th>
                                <th class="text-center" style="min-width: 150px;">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                        {{#preguntas}}
                            <tr>
                                <td><span class="badge bg-dark">{{reporte_id}}</span></td>
                                <td class="text-break">{{pregunta_texto}}</td>
                                <td class="text-break">{{motivo}}</td>
                                <td><i class="fa fa-user-circle text-secondary me-1"></i>{{usuario_nombre}}</td>
                                <td>{{fecha_reporte}}</td>
                                <td class="text-center">
                                    <div class="d-flex flex-column flex-sm-row justify-content-center align-items-center gap-2">
                                        <form action="/QuizGame/question/approveReport" method="POST" class="d-grid w-100 w-sm-auto">
                                            <input type="hidden" name="reporte_id" value="{{reporte_id}}">
                                            <button type="submit" class="btn btn-outline-dark btn-sm" onclick="return confirm('¿Marcar este reporte como revisado? La pregunta se desactivará.');">Inactivar</button>
                                        </form>
                                        <form action="/QuizGame/question/rejectReport" method="POST" class="d-grid w-100 w-sm-auto">
                                            <input type="hidden" name="reporte_id" value="{{reporte_id}}">
                                            <button type="submit" class="btn btn-outline-danger btn-sm" onclick="return confirm('¿Rechazar este reporte? La pregunta seguirá activa.');">Rechazar</button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        {{/preguntas}}
                        {{^preguntas}}
                            <tr><td colspan="6" class="text-center text-muted p-4">No hay preguntas reportadas pendientes.</td></tr>
                        {{/preguntas}}
                        </tbody>
                    </table>
                </div>
                <div class="text-center mt-4"><a href="/QuizGame/lobby" class="btn btn-secondary px-4">Volver al Lobby</a></div>
            </div>
        </div>
    </div>
</section>